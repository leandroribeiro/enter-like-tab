@model dynamic

@{
    ViewBag.Title = "By JavaScript (pure)";
}

@section javascript
{
    <script type="text/javascript">
        $(document).ready(function () {
            $('body').on('keydown', 'input, select, textarea', function (e) {
                var self = $(this),
                    form = self.parents('form:eq(0)'),
                    focusable,
                    next,
                    prev;

                if (e.shiftKey) {
                    if (e.keyCode == 13) {
                        focusable = form.find('input,a,select,button,textarea').filter(':visible');
                        prev = focusable.eq(focusable.index(this) - 1);

                        if (prev.length) {
                            prev.focus();
                        } else {
                            form.submit();
                        }
                    }
                } else if (e.keyCode == 13) {
                    focusable = form.find('input,a,select,button,textarea').filter(':visible');
                    next = focusable.eq(focusable.index(this) + 1);
                    if (next.length) {
                        next.focus();
                    } else {
                        form.submit();
                    }
                    return false;
                }
            });
        });
    </script>
}

<h2>@ViewBag.Title</h2>

<h5>Reference: <a href="http://stackoverflow.com/questions/1009808/enter-key-press-behaves-like-a-tab-in-javascript" target="_blank">http://stackoverflow.com/questions/1009808/enter-key-press-behaves-like-a-tab-in-javascript</a> </h5>

@Html.Partial("_Form")
